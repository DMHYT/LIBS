## **TextureWorker**
***
TextureWorker - это библиотека, которая позволит создавать изменённые текстуры / битмапы, через код. Все текстуры, которые вы задали, будут генерироваться в процессе билда мода.
***
## **Работа с библиотекой**
***
### **Инициализация**
Для начала работы вы должны поместить файл `TextureWorker.js` в директорию для библиотек, в вашем моде, и импортировать библиотеку.
```js
IMPORT("TextureWorker");
```

### **Примечание!**
Все методы библиотеки имеют две вариации, отличающиеся определением пути: первые берут данный вами путь как абсолютный, вторые берут ваш путь относительно директории мода. В коде они отличаются наличием или неналичием приписки `ModDir`. Например,
```js
TextureWorker.paintTexture(...);//возьмёт путь как абсолютный
TextureWorker.paintTextureModDir(...);//возьмёт путь как относительный
```
Задавая пути и имена текстур, мы будем следовать интерфейсу `ITextureSource`. В случае если вам нужно поместить в метод и абсолютные, и относительные пути, вы можете использовать один вспомогательный метод, данный библиотекой.
```js
//следуя интерфейсу ITextureSource
let textureSource = {
    path: "assets/items-opaque/", 
    name: "some"
};
let relativeFromAbsolute = TextureWorker.fromModDir(textureSource);
//вернёт объект ITextureSource с АБСОЛЮТНЫМ путём, который вы сможете поместить в методы без приписки ModDir
```
***
## **Использование методов библиотеки**
***
### **Наложение слоёв на текстуру**
Метод `createTextureWithOverlays` позволит вам наложить несколько текстур-слоёв на одну текстуру. Мы будем использовать методы с припиской `ModDir` для упрощения работы.
```js
TextureWorker.createTextureWithOverlaysModDir({
  //параметры битмапа текстуры-результата
  //объект типа IBitmap (вы можете увидеть его в декларациях TS)
  //вы можете использовать TextureWorker.TEXTURE_STANDART вместо написания объекта, это стандартная текстура 16 на 16 с конфигом ARGB_8888
  bitmap: {
    width: 16,//Ширина текстуры в пикселях
    height: 16,//Высота текстуры в пикселях
    //объект android.graphics.Bitmap.Config для текстуры
    config: android.graphics.Bitmap.Config.ARGB_8888
  },
  //массив объектов типа IOverlay
  // (то же что и ITextureSource, но с дополнительным RGB цветом)
  overlays: [
    //слои, которые будут наложены на исходную текстуру
    //исходной текстурой берётся первый элемент массива
    {
      // Значения красного, зелёного и синего каналов цвета для покраски слоя (необязательно)
      color: [255, 0, 255],
      //путь к текстуре (из директории мода в этом случае)
      path: "assets/items-opaque/",
      //имя текстуры без .png
      name: "myTexture_0"
    },
    //...
  ],
  result: {
    //путь и имя текстуры, которая будет создана
    path: "assets/items-opaque/",
    name: "myNewTexture_0"
  }
});
```
***

### **Покраска текстуры**
Метод `createTextureWithOverlays` позволяет покрасить выбранные слои по желанию. Но если вам нужно просто изменить цвет одной текстуры, просто используйте метод `paintTexture`.
```js
TextureWorker.paintTextureModDir({
  //параметры битмапа текстуры-результата
  // (рассмотрены выше)
  bitmap: {
    width: 16,
    height: 16,
    config: Bitmap.Config.ARGB_8888
  },
  //путь и имя исходной текстуры
  src: {
    path: "assets/items-opaque/",
    name: "myTexture_0",
  },
  // [красный, зелёный, синий] значения цвета
  color: [255, 0, 255],
  //путь и имя текстуры-результата
  result: {
    path: "assets/items-opaque/",
    name: "myPaintedTexture_0"
  }
});
```
***

### **Создание текстуры в оттенках серого**
Метод `grayscaleImage` позволит вам сделать вашу текстуру в оттенках серого. Вам это понадобится, например, если вы захотите создать много разноцветных текстур из одной серой, используя метод `paintTexture`.
```js
TextureWorker.grayscaleImage(
/*Путь и имя исходной текстуры*/{
  path: "assets/items-opaque/",
  name: "myTexture_0",
}, /*Путь и имя текстуры-результата*/{
  path: "assets/items-opaque/",
  name: "myGrayTexture_0"
});
```
***

## **Дополнительно**
***
Все методы библиотеки имеют один необязательный параметр `fallback`, который определит вернёт ли функция `void` или объект `android.graphics.Bitmap` текстуры-результата для ваших дальнейших манипуляций.
```js
//вернёт void
TextureWorker.paintTexture({...}, false);
//вернёт объект битмапа текстуры, сгенерированной методом
let bitmap = TextureWorker.paintTexture({...}, true);
```

***
### **ИНФОРМАЦИЯ**
#### Вы можете предложить свои полезные методы для текстур в ВК, а также предлагать свои идеи по поводу улучшения удобства и кастомизации библиотеки.
#### [Моя группа ВК](https://www.vk.com/dmhmods)
#### [Мой ВК](https://www.vk.com/vstannumdum)
***
###### © vstannumdum 2020
